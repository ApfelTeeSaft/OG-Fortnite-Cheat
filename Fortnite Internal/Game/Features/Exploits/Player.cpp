#include "Player.h"

#include "../../../Configs/Config.h"
#include "../../Actors/ActorCache.h"

void Features::Exploits::Player::Tick(SDK::AFortPlayerPawnAthena* FortPawn, SDK::AFortPlayerController* Controller)
{
    if (Config::Exploits::Player::ADSWhileNotOnGround)
    {
        FortPawn->SetbADSWhileNotOnGround(true, &Config::Exploits::Player::ADSWhileNotOnGround);
    }

    if (Config::Exploits::Player::DoublePump)
    {
        FortPawn->CurrentWeapon()->SetbIgnoreTryToFireSlotCooldownRestriction(true, &Config::Exploits::Player::DoublePump);
    }

    if (Config::Exploits::Player::ZiplineFly)
    {
        FortPawn->ZiplineState()->SetbIsZiplining(true);
    }

    if (Config::Exploits::Player::EditEnemyBuilds)
    {
        SDK::ABuildingActor* TargetedBuilding = Controller->TargetedBuilding();
        if (TargetedBuilding)
        {
            TargetedBuilding->SetTeamIndex(Actors::LocalPawnCache.TeamIndex, &Config::Exploits::Player::EditEnemyBuilds);
        }
    }
}